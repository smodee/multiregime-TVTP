% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utility_functions.R
\name{softmax_row}
\alias{softmax_row}
\title{Softmax row transformation with reference category}
\usage{
softmax_row(x)
}
\arguments{
\item{x}{Numeric vector of length K-1 (unconstrained softmax parameters for
off-diagonal entries of one row)}
}
\value{
A list with components:
\describe{
\item{offdiag}{Numeric vector of K-1 off-diagonal probabilities}
\item{diag}{Scalar diagonal probability}
}
}
\description{
Converts K-1 unconstrained real parameters into a full row of K probabilities
using softmax normalization with the diagonal entry fixed at reference value 0.
}
\details{
For K-1 unconstrained parameters x_1, ..., x_{K-1} and a fixed reference of 0
for the diagonal entry:
\itemize{
\item p_j = exp(x_j) / (1 + sum(exp(x_k))) for off-diagonal entries
\item p_diag = 1 / (1 + sum(exp(x_k))) for the diagonal entry
}

All probabilities are guaranteed positive and sum to 1. Uses the max-subtraction
trick for numerical stability with large parameter values.
}
\examples{
\dontrun{
# Equal probabilities for K=3: all params = 0
softmax_row(c(0, 0))  # offdiag = c(1/3, 1/3), diag = 1/3

# High persistence: negative off-diagonal params
softmax_row(c(-3, -3))  # Small off-diag, large diagonal
}
}
